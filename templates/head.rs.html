@use ::Link;
@use nickel::Request;
@use nickel_jwt_session::SessionRequestExtensions;

@(req: &Request, lpath: &[Link])

<header>
<span><a href="/">Images</a>
@for p in lpath { - <a href="@p.url">@p.name</a> }
</span>
<span>路 <a href="/tag/">Tags</a></span>
<span>路 <a href="/person/">People</a></span>
<span>路 <a href="/place/">Places</a></span>
<span>路 <a href="/thisday">On this day</a></span>
@if let Some(ref u) = req.authorized_user() {<span class="user">@u (<a href="/logout">log out</a>)</span>}
else {<span class="user">(<a href="/login@if let Some(p) = req.path_without_query() {?next=@p}">log in</a>)</span>}
</header>
